<div class="InGrid">
  <in-card [heading]="'Proxy Server Settings'"
           [messages]="proxySettingsMessages"
           class="InGrid-item">
    <div inCardHeader>
      <div class="InSettings-help">
        <in-icon class="InSettings-helpIcon"
                 [icon]="'help'"></in-icon>
        <in-tooltip #proxyServerTooltip="tooltip"
                    (mouseover)="proxyServerTooltip.open()"
                    (mouseout)="proxyServerTooltip.close()"
                    class="InSettings-helpTooltip">
          <p>Set the port to use for the proxy server.</p>
          <p>You can then use http://localhost:{PORT} to intercept requests.</p>
        </in-tooltip>
      </div>
    </div>
    <form *ngIf="proxySettingsResolved"
          (ngSubmit)="onSubmitProxySettings(proxySettingsForm)"
          #proxySettingsForm="ngForm">
      <div class="InForm-item">
        <in-input type="number"
                  ngControl="port"
                  [(ngModel)]="proxySettings.port"
                  [inRequired]="true"
                  [field]="'port'"
                  [label]="'Port'"></in-input>
      </div>

      <div class="InForm-buttons">
        <button class="InButton InButton--positive InForm-button"
                [class.is-disabled]="!proxySettingsForm.valid"
                type="submit"
                [disabled]="!proxySettingsForm.valid">Save</button>
      </div>
    </form>
  </in-card>

  <in-card [heading]="'Proxy Target Settings'"
           [messages]="targetHostSettingsMessages"
           class="InGrid-item">
    <div inCardHeader>
      <div class="InSettings-help">
        <in-icon class="InSettings-helpIcon"
                 [icon]="'help'"></in-icon>
        <in-tooltip #proxyTargetTooltip="tooltip"
                    (mouseover)="proxyTargetTooltip.open()"
                    (mouseout)="proxyTargetTooltip.close()"
                    class="InSettings-helpTooltip">
          <p>Set the hostname and port number to proxy.</p>
          <p>For example, if you want to intercept requests from localhost on port 8080, set the hostname to 'localhost' and the port number to '8080'.</p>
        </in-tooltip>
      </div>
    </div>
    <form *ngIf="targetHostSettingsResolved"
          (ngSubmit)="onSubmitTargetHostSettings(targetHostSettingsForm)"
          #targetHostSettingsForm="ngForm">
      <div class="InForm-item">
        <in-input type="text"
                  ngControl="hostname"
                  [(ngModel)]="targetHostSettings.hostname"
                  [inRequired]="true"
                  [field]="'hostname'"
                  [label]="'Hostname'"></in-input>
      </div>

      <div class="InForm-item">
        <in-input type="number"
                  ngControl="port"
                  [(ngModel)]="targetHostSettings.port"
                  [inRequired]="true"
                  [field]="'port'"
                  [label]="'Port'"></in-input>
      </div>

      <div class="InForm-buttons">
        <button class="InButton InButton--positive InForm-button"
                [class.is-disabled]="!targetHostSettingsForm.valid"
                type="submit"
                [disabled]="!targetHostSettingsForm.valid">Save</button>
      </div>
    </form>
  </in-card>
</div>
